{"content": "<p>Inclure le m\u00eame fichier JavaScript \u00e0 deux reprises dans une seule page nuit \u00e0 la performance. Ce n&rsquo;est pas aussi rare qu&rsquo;on pourrait le penser. Un examen des dix meilleurs sites web am\u00e9ricains montre que deux d&rsquo;entre eux contiennent un script dupliqu\u00e9. Deux principaux facteurs augmentent les chances d&rsquo;un script d&rsquo;\u00eatre dupliqu\u00e9 dans une page Web : la taille de l&rsquo;\u00e9quipe et le nombre de scripts. Lorsque cela arrive, le doublon met \u00e0 mal les performances en cr\u00e9ant des requ\u00eates HTTP inutiles et l&rsquo;ex\u00e9cution de code JavaScript perdu.</p><p>Des requ\u00eates HTTP inutiles se produisent dans Internet Explorer mais pas dans Firefox. Dans Internet Explorer, si un script externe est inclus deux fois et n&rsquo;est pas mis en cache, il g\u00e9n\u00e8re deux requ\u00eates HTTP lors du chargement de la page. M\u00eame si le script est mis en cache, des requ\u00eates HTTP suppl\u00e9mentaires se produisent lorsque l&rsquo;utilisateur recharge la page.</p><p>En plus de g\u00e9n\u00e9rer des requ\u00eates HTTP inutiles, du temps est perdu \u00e0 interpr\u00e9ter le script plusieurs fois. Cette ex\u00e9cution JavaScript redondante se passe dans Firefox et Internet Explorer, ind\u00e9pendamment du fait que le script est mis en cache.</p><p>Une fa\u00e7on d&rsquo;\u00e9viter d&rsquo;inclure accidentellement le m\u00eame script deux fois est de mettre en place un module de gestion de scripts dans votre syst\u00e8me de templates. La mani\u00e8re typique d&rsquo;inclure un script est d&rsquo;utiliser la balise SCRIPT dans votre page HTML.</p><pre><code>&lt;script type=&quot;text/javascript&quot; src=&quot;menu_1.0.17.js&quot;&gt;&lt;/script&gt;</code></pre><p>Une alternative en PHP serait de cr\u00e9er une fonction appel\u00e9e <code>insertScript</code>.</p><pre><code>&lt;?php insertScript(&quot;menu.js&quot;) ?&gt;</code></pre><p>En plus de pr\u00e9venir le m\u00eame script d&rsquo;\u00eatre ins\u00e9r\u00e9 \u00e0 plusieurs reprises, cette fonction pourrait traiter d&rsquo;autres choses avec des scripts, tels que le contr\u00f4le des d\u00e9pendances et l&rsquo;ajout de num\u00e9ros de version pour les noms de fichiers de scripts. Ceci afin de b\u00e9n\u00e9ficer des en-t\u00eates Expire.</p>", "id": "ydupes", "title": "Supprimer les scripts en doublons"}