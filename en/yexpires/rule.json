{"content": "<p>There are two aspects to this rule:</p><ul><li>For static components: implement &ldquo;Never expire&rdquo; policy by setting far future <code>Expires</code> header</li><li>For dynamic components: use an appropriate <code>Cache-Control</code> header to help the browser with conditional requests</li></ul><p>Web page designs are getting richer and richer, which means more scripts, stylesheets, images, and Flash in the page. A first-time visitor to your page may have to make several HTTP requests, but by using the Expires header you make those components cacheable. This avoids unnecessary HTTP requests on subsequent page views. Expires headers are most often used with images, but they should be used on <em>all</em> components including scripts, stylesheets, and Flash components.</p><p>Browsers (and proxies) use a cache to reduce the number and size of HTTP requests, making web pages load faster. A web server uses the Expires header in the HTTP response to tell the client how long a component can be cached. This is a far future Expires header, telling the browser that this response won&rsquo;t be stale until April 15, 2010.</p><pre><code>Expires: Thu, 15 Apr 2010 20:00:00 GMT</code></pre><p>If your server is Apache, use the ExpiresDefault directive to set an expiration date relative to the current date. This example of the ExpiresDefault directive sets the Expires date 10 years out from the time of the request.</p><pre><code>ExpiresDefault &quot;access plus 10 years&quot;</code></pre><p>Keep in mind, if you use a far future Expires header you have to change the component&rsquo;s filename whenever the component changes. At Yahoo! we often make this step part of the build process: a version number is embedded in the component&rsquo;s filename, for example, yahoo_2.0.6.js.</p><p>Using a far future Expires header affects page views only after a user has already visited your site. It has no effect on the number of HTTP requests when a user visits your site for the first time and the browser&rsquo;s cache is empty. Therefore the impact of this performance improvement depends on how often users hit your pages with a primed cache. (A &ldquo;primed cache&rdquo; already contains all of the components in the page.) We <a href=\"http://yuiblog.com/blog/2007/01/04/performance-research-part-2/\">measured this at Yahoo!</a> and found the number of page views with a primed cache is 75-85%. By using a far future Expires header, you increase the number of components that are cached by the browser and re-used on subsequent page views without sending a single byte over the user&rsquo;s Internet connection.</p>", "id": "yexpires", "title": "Add Expires or Cache-Control Header"}